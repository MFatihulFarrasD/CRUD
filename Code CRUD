<?php
/* 
 * Generated by CRUDigniter v3.2 
 * www.crudigniter.com
 */
 
class Tbl_mh extends CI_Controller{
    function __construct()
    {
        parent::__construct();
        $this->load->model('Tbl_mh_model');
    } 

    /*
     * Listing of tbl_mhs
     */
    function index()
    {
        $data['tbl_mhs'] = $this->Tbl_mh_model->get_all_tbl_mhs();
        
        $data['_view'] = 'tbl_mh/index';
        $this->load->view('layouts/main',$data);
    }

    /*
     * Adding a new tbl_mh
     */
    function add()
    {   
        $this->load->library('form_validation');

		$this->form_validation->set_rules('nim','Nim','required');
		$this->form_validation->set_rules('namamhs','Namamhs','required');
		$this->form_validation->set_rules('jk','Jk','required');
		$this->form_validation->set_rules('alamat','Alamat','required');
		$this->form_validation->set_rules('kota','Kota','required');
		$this->form_validation->set_rules('email','Email','required');
		$this->form_validation->set_rules('foto','Foto','required');
		
		if($this->form_validation->run())     
        {   
            $params = array(
				'jk' => $this->input->post('jk'),
				'nim' => $this->input->post('nim'),
				'namamhs' => $this->input->post('namamhs'),
				'alamat' => $this->input->post('alamat'),
				'kota' => $this->input->post('kota'),
				'email' => $this->input->post('email'),
				'foto' => $this->input->post('foto'),
            );
            
            $tbl_mh_id = $this->Tbl_mh_model->add_tbl_mh($params);
            redirect('tbl_mh/index');
        }
        else
        {            
            $data['_view'] = 'tbl_mh/add';
            $this->load->view('layouts/main',$data);
        }
    }  

    /*
     * Editing a tbl_mh
     */
    function edit($id)
    {   
        // check if the tbl_mh exists before trying to edit it
        $data['tbl_mh'] = $this->Tbl_mh_model->get_tbl_mh($id);
        
        if(isset($data['tbl_mh']['id']))
        {
            $this->load->library('form_validation');

			$this->form_validation->set_rules('nim','Nim','required');
			$this->form_validation->set_rules('namamhs','Namamhs','required');
			$this->form_validation->set_rules('jk','Jk','required');
			$this->form_validation->set_rules('alamat','Alamat','required');
			$this->form_validation->set_rules('kota','Kota','required');
			$this->form_validation->set_rules('email','Email','required');
			$this->form_validation->set_rules('foto','Foto','required');
		
			if($this->form_validation->run())     
            {   
                $params = array(
					'jk' => $this->input->post('jk'),
					'nim' => $this->input->post('nim'),
					'namamhs' => $this->input->post('namamhs'),
					'alamat' => $this->input->post('alamat'),
					'kota' => $this->input->post('kota'),
					'email' => $this->input->post('email'),
					'foto' => $this->input->post('foto'),
                );

                $this->Tbl_mh_model->update_tbl_mh($id,$params);            
                redirect('tbl_mh/index');
            }
            else
            {
                $data['_view'] = 'tbl_mh/edit';
                $this->load->view('layouts/main',$data);
            }
        }
        else
            show_error('The tbl_mh you are trying to edit does not exist.');
    } 

    /*
     * Deleting tbl_mh
     */
    function remove($id)
    {
        $tbl_mh = $this->Tbl_mh_model->get_tbl_mh($id);

        // check if the tbl_mh exists before trying to delete it
        if(isset($tbl_mh['id']))
        {
            $this->Tbl_mh_model->delete_tbl_mh($id);
            redirect('tbl_mh/index');
        }
        else
            show_error('The tbl_mh you are trying to delete does not exist.');
    }
    
}

<?php
/* 
 * Generated by CRUDigniter v3.2 
 * www.crudigniter.com
 */
 
class Tbl_mh_model extends CI_Model
{
    function __construct()
    {
        parent::__construct();
    }
    
    /*
     * Get tbl_mh by id
     */
    function get_tbl_mh($id)
    {
        return $this->db->get_where('tbl_mhs',array('id'=>$id))->row_array();
    }
        
    /*
     * Get all tbl_mhs
     */
    function get_all_tbl_mhs()
    {
        $this->db->order_by('id', 'desc');
        return $this->db->get('tbl_mhs')->result_array();
    }
        
    /*
     * function to add new tbl_mh
     */
    function add_tbl_mh($params)
    {
        $this->db->insert('tbl_mhs',$params);
        return $this->db->insert_id();
    }
    
    /*
     * function to update tbl_mh
     */
    function update_tbl_mh($id,$params)
    {
        $this->db->where('id',$id);
        return $this->db->update('tbl_mhs',$params);
    }
    
    /*
     * function to delete tbl_mh
     */
    function delete_tbl_mh($id)
    {
        return $this->db->delete('tbl_mhs',array('id'=>$id));
    }
}

<?php echo form_open('tbl_mh/add',array("class"=>"form-horizontal")); ?>

	<div class="form-group">
		<label for="jk" class="col-md-4 control-label"><span class="text-danger">*</span>Jk</label>
		<div class="col-md-8">
			<select name="jk" class="form-control">
				<option value="">select</option>
				<?php 
				$jk_values = array(
					'L'=>'L',
					'P'=>'P',
				);

				foreach($jk_values as $value => $display_text)
				{
					$selected = ($value == $this->input->post('jk')) ? ' selected="selected"' : "";

					echo '<option value="'.$value.'" '.$selected.'>'.$display_text.'</option>';
				} 
				?>
			</select>
			<span class="text-danger"><?php echo form_error('jk');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="nim" class="col-md-4 control-label"><span class="text-danger">*</span>Nim</label>
		<div class="col-md-8">
			<input type="text" name="nim" value="<?php echo $this->input->post('nim'); ?>" class="form-control" id="nim" />
			<span class="text-danger"><?php echo form_error('nim');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="namamhs" class="col-md-4 control-label"><span class="text-danger">*</span>Namamhs</label>
		<div class="col-md-8">
			<input type="text" name="namamhs" value="<?php echo $this->input->post('namamhs'); ?>" class="form-control" id="namamhs" />
			<span class="text-danger"><?php echo form_error('namamhs');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="alamat" class="col-md-4 control-label"><span class="text-danger">*</span>Alamat</label>
		<div class="col-md-8">
			<input type="text" name="alamat" value="<?php echo $this->input->post('alamat'); ?>" class="form-control" id="alamat" />
			<span class="text-danger"><?php echo form_error('alamat');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="kota" class="col-md-4 control-label"><span class="text-danger">*</span>Kota</label>
		<div class="col-md-8">
			<input type="text" name="kota" value="<?php echo $this->input->post('kota'); ?>" class="form-control" id="kota" />
			<span class="text-danger"><?php echo form_error('kota');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="email" class="col-md-4 control-label"><span class="text-danger">*</span>Email</label>
		<div class="col-md-8">
			<input type="text" name="email" value="<?php echo $this->input->post('email'); ?>" class="form-control" id="email" />
			<span class="text-danger"><?php echo form_error('email');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="foto" class="col-md-4 control-label"><span class="text-danger">*</span>Foto</label>
		<div class="col-md-8">
			<input type="text" name="foto" value="<?php echo $this->input->post('foto'); ?>" class="form-control" id="foto" />
			<span class="text-danger"><?php echo form_error('foto');?></span>
		</div>
	</div>
	
	<div class="form-group">
		<div class="col-sm-offset-4 col-sm-8">
			<button type="submit" class="btn btn-success">Save</button>
        </div>
	</div>

<?php echo form_close(); ?>

<?php echo form_open('tbl_mh/edit/'.$tbl_mh['id'],array("class"=>"form-horizontal")); ?>

	<div class="form-group">
		<label for="jk" class="col-md-4 control-label"><span class="text-danger">*</span>Jk</label>
		<div class="col-md-8">
			<select name="jk" class="form-control">
				<option value="">select</option>
				<?php 
				$jk_values = array(
					'L'=>'L',
					'P'=>'P',
				);

				foreach($jk_values as $value => $display_text)
				{
					$selected = ($value == $tbl_mh['jk']) ? ' selected="selected"' : "";

					echo '<option value="'.$value.'" '.$selected.'>'.$display_text.'</option>';
				} 
				?>
			</select>
			<span class="text-danger"><?php echo form_error('jk');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="nim" class="col-md-4 control-label"><span class="text-danger">*</span>Nim</label>
		<div class="col-md-8">
			<input type="text" name="nim" value="<?php echo ($this->input->post('nim') ? $this->input->post('nim') : $tbl_mh['nim']); ?>" class="form-control" id="nim" />
			<span class="text-danger"><?php echo form_error('nim');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="namamhs" class="col-md-4 control-label"><span class="text-danger">*</span>Namamhs</label>
		<div class="col-md-8">
			<input type="text" name="namamhs" value="<?php echo ($this->input->post('namamhs') ? $this->input->post('namamhs') : $tbl_mh['namamhs']); ?>" class="form-control" id="namamhs" />
			<span class="text-danger"><?php echo form_error('namamhs');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="alamat" class="col-md-4 control-label"><span class="text-danger">*</span>Alamat</label>
		<div class="col-md-8">
			<input type="text" name="alamat" value="<?php echo ($this->input->post('alamat') ? $this->input->post('alamat') : $tbl_mh['alamat']); ?>" class="form-control" id="alamat" />
			<span class="text-danger"><?php echo form_error('alamat');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="kota" class="col-md-4 control-label"><span class="text-danger">*</span>Kota</label>
		<div class="col-md-8">
			<input type="text" name="kota" value="<?php echo ($this->input->post('kota') ? $this->input->post('kota') : $tbl_mh['kota']); ?>" class="form-control" id="kota" />
			<span class="text-danger"><?php echo form_error('kota');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="email" class="col-md-4 control-label"><span class="text-danger">*</span>Email</label>
		<div class="col-md-8">
			<input type="text" name="email" value="<?php echo ($this->input->post('email') ? $this->input->post('email') : $tbl_mh['email']); ?>" class="form-control" id="email" />
			<span class="text-danger"><?php echo form_error('email');?></span>
		</div>
	</div>
	<div class="form-group">
		<label for="foto" class="col-md-4 control-label"><span class="text-danger">*</span>Foto</label>
		<div class="col-md-8">
			<input type="text" name="foto" value="<?php echo ($this->input->post('foto') ? $this->input->post('foto') : $tbl_mh['foto']); ?>" class="form-control" id="foto" />
			<span class="text-danger"><?php echo form_error('foto');?></span>
		</div>
	</div>
	
	<div class="form-group">
		<div class="col-sm-offset-4 col-sm-8">
			<button type="submit" class="btn btn-success">Save</button>
        </div>
	</div>
	
<?php echo form_close(); ?>

<div class="pull-right">
	<a href="<?php echo site_url('tbl_mh/add'); ?>" class="btn btn-success">Add</a> 
</div>

<table class="table table-striped table-bordered">
    <tr>
		<th>ID</th>
		<th>Jk</th>
		<th>Nim</th>
		<th>Namamhs</th>
		<th>Alamat</th>
		<th>Kota</th>
		<th>Email</th>
		<th>Foto</th>
		<th>Actions</th>
    </tr>
	<?php foreach($tbl_mhs as $t){ ?>
    <tr>
		<td><?php echo $t['id']; ?></td>
		<td><?php echo $t['jk']; ?></td>
		<td><?php echo $t['nim']; ?></td>
		<td><?php echo $t['namamhs']; ?></td>
		<td><?php echo $t['alamat']; ?></td>
		<td><?php echo $t['kota']; ?></td>
		<td><?php echo $t['email']; ?></td>
		<td><?php echo $t['foto']; ?></td>
		<td>
            <a href="<?php echo site_url('tbl_mh/edit/'.$t['id']); ?>" class="btn btn-info btn-xs">Edit</a> 
            <a href="<?php echo site_url('tbl_mh/remove/'.$t['id']); ?>" class="btn btn-danger btn-xs">Delete</a>
        </td>
    </tr>
	<?php } ?>
</table>
